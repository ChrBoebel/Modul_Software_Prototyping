/* ==========================================================================
   2. Component Styles
   ========================================================================== */
@layer components {

  /* Accessibility */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* Global Select */
  select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    @apply py-2 pl-3 pr-9 text-sm text-black bg-white border border-slate-200 rounded-lg cursor-pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.625rem center;
    background-size: 16px;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }

  select:hover {
    @apply border-slate-300;
  }

  select:focus {
    @apply outline-none border-primary;
    box-shadow: 0 0 0 3px var(--primary-light);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  }

  select:disabled {
    @apply opacity-60 cursor-not-allowed bg-slate-50;
  }

  /* Layout */
  .main-layout {
    @apply flex min-h-screen;
    background-color: var(--bg-app);
  }

  .main-content {
    @apply flex-1 py-8 px-10;
    margin-left: var(--sidebar-current-width, var(--sidebar-width));
    max-width: 1600px;
    transition: margin-left 0.3s ease;
  }

  /* Sidebar */
  .sidebar {
    @apply fixed top-0 left-0 h-screen flex flex-col py-6 z-50 bg-white border-r border-slate-200 shadow-sm;
    width: var(--sidebar-width);
    transition: width 0.3s ease;
  }

  .sidebar-footer {
    @apply p-6 border-t border-slate-200 mt-auto;
  }

  .user-profile {
    @apply flex items-center gap-3;
  }

  .user-avatar {
    @apply w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold text-white;
    background-color: var(--primary);
  }

  .user-info {
    @apply flex flex-col;
  }

  .user-name {
    @apply text-sm font-semibold text-black leading-tight;
  }

  .user-role {
    @apply text-xs text-slate-400;
  }

  .logo-area {
    @apply px-6 pb-6 border-b border-slate-200 mb-6 flex items-center justify-between;
  }

  .nav-container {
    @apply flex-1 overflow-y-auto px-3;
  }

  .nav-section {
    @apply mb-6;
  }

  .nav-label {
    @apply px-3 text-xs font-semibold uppercase tracking-wider text-slate-400 mb-2;
  }

  .nav-item {
    @apply flex items-center gap-3 py-2.5 px-3 text-slate-600 no-underline rounded-xl font-medium cursor-pointer border border-transparent;
    transition: var(--transition);
  }

  .nav-item:hover {
    @apply bg-slate-100 text-black;
  }

  .nav-item.active {
    background-color: var(--primary-light);
    color: var(--primary);
    border-color: rgba(35, 88, 161, 0.1);
  }

  /* Cards */
  .card {
    @apply bg-white border border-slate-200 rounded-lg shadow-sm p-4 mb-4;
    transition: var(--transition);
    overflow: hidden;
  }

  .card:hover {
    @apply shadow border-slate-300;
  }

  .card-header {
    @apply flex items-center justify-between mb-4;
  }

  .card-header h3 {
    @apply text-base font-semibold text-black;
  }

  .card.full-width {
    grid-column: 1 / -1;
  }

  /* KPI Cards */
  .kpi-bar {
    @apply flex flex-wrap gap-3 mb-6;
  }

  .kpi-card {
    @apply bg-white border border-slate-200 rounded-lg py-3 px-4 flex items-center gap-3 shadow-sm;
    transition: var(--transition);
    min-width: 0; /* Prevent overflow */
    flex: 1 1 auto;
    max-width: 220px;
  }

  .kpi-card:hover {
    @apply shadow-md;
    transform: translateY(-1px);
  }

  .kpi-card.kpi-clickable:hover {
    @apply shadow-lg border-primary/30;
    transform: translateY(-2px);
  }

  .kpi-card.kpi-clickable:active {
    transform: translateY(0);
  }

  .kpi-icon {
    @apply w-10 h-10 rounded-lg flex items-center justify-center shrink-0 bg-slate-100 text-slate-600;
  }

  .kpi-icon.variant-primary {
    background-color: var(--primary-light);
    color: var(--primary);
  }

  .kpi-icon.variant-secondary {
    background-color: var(--swk-blue-light);
    color: var(--swk-blue);
  }

  .kpi-icon.variant-success {
    background-color: var(--success-light);
    color: var(--success);
  }

  .kpi-icon.variant-warning {
    background-color: var(--warning-light);
    color: var(--warning);
  }

  .kpi-content {
    @apply flex flex-col min-w-0;
  }

  .kpi-value {
    @apply text-xl font-bold text-black leading-tight tracking-tight truncate;
  }

  .kpi-label {
    @apply text-xs text-slate-600 font-medium truncate;
  }

  .kpi-sparkline {
    @apply mt-1;
  }

  .kpi-value-wrapper {
    @apply flex items-center gap-1.5 flex-wrap;
  }

  .kpi-unit {
    @apply text-sm font-medium text-slate-500;
  }

  .kpi-trend {
    @apply flex items-center gap-0.5 text-xs font-semibold;
  }

  .kpi-trend.trend-up {
    @apply text-[#2358A1]; /* SWK Blue - positive trends */
  }

  .kpi-trend.trend-down {
    @apply text-red-600;
  }

  .kpi-trend.trend-stable {
    @apply text-slate-500;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 text-[15px] font-bold rounded-xl cursor-pointer border border-transparent no-underline;
    transition: var(--transition);
    line-height: 1.25;
  }

  .btn-sm {
    @apply py-1.5 px-3 text-[13px] gap-1.5;
  }

  .btn-primary {
    background-color: var(--primary);
    color: var(--text-on-primary);
    @apply shadow-sm;
  }

  .btn-primary:hover {
    background-color: var(--primary-hover);
    @apply shadow-md;
  }

  .btn-secondary {
    @apply bg-white border-slate-200 text-slate-600 shadow-sm;
  }

  .btn-secondary:hover {
    @apply bg-slate-50 border-slate-300 text-black;
  }

  .btn-link {
    @apply bg-transparent p-0 font-medium;
    color: var(--primary);
  }

  .btn-link:hover {
    @apply underline;
  }

  .btn-danger {
    background: var(--danger);
    @apply text-white;
  }

  .btn-danger:hover {
    background: var(--danger-hover);
  }

  .btn:focus-visible,
  .nav-item-new:focus-visible,
  .section-tab:focus-visible,
  .tenant-button:focus-visible,
  .mobile-menu-btn:focus-visible,
  .toggle-btn:focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 3px rgba(226, 0, 26, 0.4);
  }

  /* Inputs */
  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="search"],
  input[type="url"],
  textarea {
    @apply block w-full py-2.5 px-3.5 text-[15px] text-black bg-white border border-slate-300 rounded-xl shadow-sm;
    transition: var(--transition);
  }

  input:focus,
  textarea:focus {
    @apply outline-none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(226, 0, 26, 0.4);
  }

  input::placeholder {
    @apply text-slate-400;
  }

  /* Tables */
  .table-wrapper {
    @apply overflow-x-auto border border-slate-200 rounded-lg;
    max-width: 100%;
  }

  .data-table {
    @apply w-full bg-white text-[13px];
    border-collapse: collapse;
    table-layout: auto;
  }

  .data-table th {
    @apply py-2.5 px-3 text-left text-[11px] font-semibold uppercase tracking-wider text-slate-500 bg-slate-50 border-b border-slate-200;
    white-space: nowrap;
  }

  .data-table td {
    @apply py-2.5 px-3 border-b border-slate-200 text-black;
  }

  .data-table tbody tr:last-child td {
    @apply border-b-0;
  }

  .data-table tbody tr:nth-child(even) {
    @apply bg-slate-50;
  }

  .data-table tbody tr:hover {
    @apply bg-slate-100;
  }

  .data-table tbody tr:focus-visible {
    @apply outline-none;
    box-shadow: inset 0 0 0 2px var(--primary);
    background-color: var(--primary-light);
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center py-1 px-2.5 rounded-full text-xs font-semibold leading-none uppercase tracking-tight;
  }

  .badge.success {
    background-color: var(--success-light);
    color: var(--success);
  }

  .badge.warning {
    background-color: var(--warning-light);
    color: var(--warning);
  }

  .badge.danger {
    background-color: var(--danger-light);
    color: var(--danger);
  }

  .badge.info {
    background-color: var(--info-light);
    color: var(--info);
  }

  .badge.neutral {
    @apply bg-slate-100 text-slate-600;
  }

  /* Tabs */
  .section-tabs {
    @apply flex gap-4 border-b border-slate-200 mb-8;
  }

  .section-tab {
    @apply py-3 px-1 bg-transparent border-0 text-[15px] font-medium text-slate-600 cursor-pointer border-b-2 border-transparent flex items-center gap-2;
    transition: var(--transition);
  }

  .section-tab:hover {
    @apply text-black;
  }

  .section-tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
  }

  /* Grid Utilities */
  .content-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(2, 1fr);
  }

  .grid-3 {
    @apply grid gap-6;
    grid-template-columns: repeat(3, 1fr);
  }

  /* Form Elements */
  .form-row {
    @apply grid gap-6 mb-6;
    grid-template-columns: 1fr 1fr;
  }

  .form-group label {
    @apply block text-sm font-semibold text-black mb-2;
  }

  .form-hint {
    @apply block mt-1.5 text-xs text-slate-400;
  }

  /* Toast */
  .toast {
    @apply fixed bottom-6 right-6 z-[9999] py-4 px-6 text-white rounded-lg shadow-lg text-[15px] flex items-center gap-3 max-w-[420px] opacity-0 pointer-events-none;
    background: var(--slate-900);
    transform: translateY(12px);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .toast.show {
    @apply opacity-100 pointer-events-auto;
    transform: translateY(0);
  }

  /* URL Output */
  .url-output {
    @apply bg-slate-50 border border-slate-200 p-4 rounded-lg flex items-center justify-between gap-4;
  }

  .url-output code {
    @apply font-mono text-sm break-all;
    color: var(--swk-blue);
  }

  /* Chart Container */
  .chart-container {
    @apply relative w-full;
  }

  /* Action Buttons */
  .action-buttons {
    @apply flex gap-1.5;
  }

  /* Status Dot */
  .status-dot {
    @apply inline-block w-3 h-3 rounded-full;
  }

  .status-dot.success {
    background: var(--success);
  }

  .status-dot.warning {
    background: var(--warning);
  }

  .status-dot.danger {
    background: var(--danger);
  }

  /* Status Badge */
  .status-badge {
    @apply text-xs py-1 px-2 rounded-full font-semibold uppercase;
  }

  .status-badge.active {
    background-color: var(--success-light);
    color: var(--success);
  }

  .status-badge.vacation {
    background-color: var(--warning-light);
    color: var(--warning);
  }

  /* Score Badge */
  .score-badge {
    @apply inline-flex items-center justify-center min-w-[36px] py-1 px-2 rounded-full text-xs font-bold;
  }

  .score-badge.high {
    background: var(--success-light);
    color: var(--success);
  }

  .score-badge.medium {
    background: var(--warning-light);
    @apply text-slate-700;
  }

  .score-badge.low {
    background: var(--danger-light);
    color: var(--danger);
  }

  .score-badge.variant-hot {
    background-color: var(--danger-light);
    color: var(--danger);
  }

  .score-badge.variant-sql {
    background-color: var(--success-light);
    color: var(--success);
  }

  .score-badge.variant-mql {
    background-color: var(--swk-blue-light);
    color: var(--swk-blue);
  }

  .score-badge.variant-new {
    @apply bg-slate-100 text-slate-400;
  }

  /* General Tooltip Animation */
  @keyframes tooltipIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Score Tooltip */
  .score-tooltip {
    pointer-events: none;
    animation: tooltipIn 0.12s ease-out;
  }

  .score-tooltip-content {
    @apply bg-white rounded-xl shadow-lg border border-slate-200;
    min-width: 180px;
    padding: 12px 14px;
  }

  .score-tooltip-header {
    @apply flex items-center gap-2 pb-2 mb-2 border-b border-slate-100;
  }

  .score-tooltip-indicator {
    @apply w-2.5 h-2.5 rounded-full;
  }

  .score-tooltip-indicator.high {
    background: var(--success);
  }

  .score-tooltip-indicator.medium {
    background: var(--warning);
  }

  .score-tooltip-indicator.low {
    background: var(--danger);
  }

  .score-tooltip-label {
    @apply text-[13px] font-semibold text-slate-700;
  }

  .score-tooltip-value {
    @apply text-[12px] text-slate-400 ml-auto font-medium;
  }

  .score-tooltip-breakdown {
    @apply flex flex-col gap-1.5;
  }

  .score-tooltip-row {
    @apply flex items-center justify-between text-[12px];
  }

  .score-tooltip-item-label {
    @apply text-slate-500;
  }

  .score-tooltip-item-points {
    @apply font-semibold tabular-nums;
  }

  .score-tooltip-item-points.positive {
    color: var(--success);
  }

  .score-tooltip-item-points.negative {
    color: var(--danger);
  }

  .score-tooltip-arrow {
    @apply absolute left-1/2 -translate-x-1/2;
    bottom: -6px;
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 6px solid white;
    filter: drop-shadow(0 1px 1px rgba(0,0,0,0.05));
  }

  /* Trend Indicators */
  .trend-up {
    color: var(--success);
  }

  .trend-down {
    color: var(--danger);
  }

  .trend-stable {
    @apply text-slate-400 font-bold;
  }

  /* Availability Badge */
  .availability-badge {
    @apply inline-flex items-center gap-1 py-1 px-2 rounded text-xs font-medium;
  }

  .availability-badge.serviceable {
    background: var(--success-light);
    color: var(--success);
  }

  .availability-badge.not-serviceable {
    background: var(--danger-light);
    color: var(--danger);
  }

  .availability-badge.partial {
    background: var(--warning-light);
    color: var(--warning-dark, var(--warning));
  }

  .availability-badge.unknown {
    @apply bg-slate-100 text-slate-400;
  }

  /* Toggle Switch */
  .toggle {
    @apply relative inline-block w-11 h-6;
  }

  .toggle input {
    @apply opacity-0 w-0 h-0;
  }

  .toggle-slider {
    @apply absolute cursor-pointer inset-0 bg-slate-300 rounded-full;
    transition: .4s;
  }

  .toggle-slider:before {
    @apply absolute h-[18px] w-[18px] left-[3px] bottom-[3px] bg-white rounded-full;
    content: "";
    transition: .4s;
  }

  input:checked+.toggle-slider {
    background-color: var(--primary);
  }

  input:checked+.toggle-slider:before {
    transform: translateX(20px);
  }

  /* Button Icon */
  .btn-icon {
    @apply flex items-center justify-center w-7 h-7 p-0 border-0 bg-transparent text-slate-600 rounded cursor-pointer;
    transition: all 0.15s ease;
  }

  .btn-icon:hover {
    background-color: var(--primary-light);
    color: var(--primary);
  }

  /* Quick Actions */
  .quick-actions {
    @apply flex items-center gap-1;
  }

  /* Leads Toggle */
  .leads-toggle {
    @apply flex bg-slate-100 rounded-lg p-1;
  }

  .toggle-btn {
    @apply py-2 px-4 border-0 bg-transparent text-slate-600 text-[13px] font-medium rounded cursor-pointer whitespace-nowrap;
    transition: all 0.15s ease;
  }

  .toggle-btn:hover {
    @apply text-black;
  }

  .toggle-btn.active {
    @apply bg-white shadow-sm;
    color: var(--primary);
  }

  /* Search Box */
  .search-box {
    @apply flex items-center gap-2 py-2 px-3 bg-white border border-slate-200 rounded-xl;
  }

  .search-box input {
    @apply border-0 bg-transparent p-0 text-sm flex-1 min-w-[180px];
  }

  .search-box input:focus {
    @apply outline-none shadow-none;
  }

  /* Form Input */
  .form-input {
    @apply w-full py-2.5 px-3 text-sm leading-snug text-black bg-white border border-slate-200 rounded-lg;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
    font-family: inherit;
  }

  .form-input:hover {
    @apply border-slate-300;
  }

  .form-input:focus {
    @apply outline-none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
  }

  .form-input::placeholder {
    @apply text-slate-400;
  }

  textarea.form-input {
    @apply resize-y min-h-[60px];
  }

  select.form-input {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px;
    @apply pr-10 cursor-pointer;
  }

  select.form-input:focus {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  }
}

