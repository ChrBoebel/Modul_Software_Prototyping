/* ==========================================================================
   Leads View Styles
   Kanban Pipeline, Lead List, Lead Detail Panel, Activity Timeline
   ========================================================================== */
@layer components {

  /* Kanban Pipeline */
  .pipeline-section {
    @apply overflow-x-auto -m-6 p-6;
    height: calc(100vh - 250px);
  }

  .kanban-board {
    @apply flex gap-6 h-full min-w-[1200px];
  }

  .kanban-column {
    @apply flex-1 min-w-[280px] bg-slate-50 rounded-xl flex flex-col h-full;
  }

  .kanban-column-header {
    @apply p-4 border-b-2 border-transparent flex justify-between items-center bg-white;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }

  .kanban-column-header h4 {
    @apply text-sm font-semibold uppercase m-0;
  }

  .column-count {
    @apply text-xs bg-slate-100 py-0.5 px-2 rounded-full text-slate-600 font-semibold;
  }

  .kanban-cards {
    @apply p-4 overflow-y-auto flex flex-col gap-4 flex-1;
  }

  .kanban-card {
    @apply bg-white border border-slate-200 rounded-lg p-4 shadow-sm cursor-pointer;
    transition: var(--transition);
  }

  .kanban-card:hover {
    @apply shadow-md;
    transform: translateY(-2px);
  }

  .kanban-card .card-header {
    @apply flex justify-between items-center mb-3;
  }

  .lead-number {
    @apply text-xs text-slate-400 font-mono;
  }

  .kanban-card .card-content h5 {
    @apply text-[15px] font-semibold mb-1 text-black;
  }

  .lead-product {
    @apply text-xs font-medium block mb-3;
    color: var(--primary);
  }

  .kanban-card .card-footer {
    @apply flex justify-between items-center border-t border-slate-100 pt-3;
  }

  .lead-date {
    @apply text-xs text-slate-400;
  }

  .qualification-badge {
    @apply text-[10px] uppercase font-semibold py-0.5 px-1.5 rounded-sm;
  }

  .kanban-empty {
    @apply text-center p-8 text-slate-400 text-sm italic;
  }

  /* Leads View Layout */
  .leads-view {
    height: calc(100vh - 120px);
  }

  .leads-container {
    @apply flex h-full gap-6;
  }

  .leads-container.with-detail .leads-list-panel {
    @apply flex-1;
  }

  .leads-list-panel {
    @apply flex-1 flex flex-col;
  }

  .lead-detail-panel {
    @apply shrink-0;
    width: clamp(380px, 35%, 500px);
    min-width: 380px;
    max-width: 500px;
  }

  .leads-list {
    @apply flex flex-col h-full;
  }

  .leads-header {
    @apply flex justify-between items-center mb-4;
  }

  .leads-header h2 {
    @apply text-xl font-bold;
  }

  .leads-controls {
    @apply flex gap-2 items-center;
  }

  .section-subheader {
    @apply text-xs font-semibold uppercase text-slate-400 mb-2;
  }

  .leads-table {
    @apply flex-1;
  }

  .leads-table tr.selected {
    background: var(--primary-light);
  }

  .lead-id-cell {
    @apply font-semibold font-mono;
  }

  .lead-name-cell {
    @apply min-w-[180px];
  }

  .lead-name-info {
    @apply flex flex-col gap-0.5;
  }

  .lead-name {
    @apply font-semibold text-black block;
  }

  .lead-id-subtext {
    @apply text-xs text-slate-400 font-mono block;
  }

  .lead-contact-subtext {
    @apply text-xs text-slate-500 block;
  }

  /* Lead Detail Panel */
  .lead-detail {
    @apply bg-white border border-slate-200 rounded-xl h-full flex flex-col overflow-hidden;
  }

  .detail-header {
    @apply flex justify-between items-center p-4 border-b border-slate-200 sticky top-0 bg-white z-10;
  }

  .header-info {
    @apply flex items-center gap-4;
  }

  .header-info h3 {
    @apply text-base font-semibold;
  }

  .status-buttons {
    @apply flex gap-2 py-3 px-4 border-b border-slate-200 sticky bg-white z-10;
    top: 56px;
  }

  .status-buttons .btn {
    @apply flex-1 justify-center;
  }

  .detail-content {
    @apply flex-1 overflow-y-auto p-4;
  }

  .detail-section {
    @apply mb-6;
  }

  .section-title {
    @apply flex items-center gap-2 mb-3;
  }

  .section-title h4 {
    @apply text-sm font-semibold;
  }

  .section-content {
    @apply bg-slate-50 rounded-lg p-4;
  }

  .data-row {
    @apply flex justify-between py-2 border-b border-slate-200;
  }

  .data-row:last-child {
    @apply border-b-0;
  }

  .data-row .label {
    @apply text-[13px] text-slate-400;
  }

  .data-row .value {
    @apply text-[13px] font-medium;
  }

  .score-table {
    @apply text-[13px];
  }

  .score-table th,
  .score-table td {
    @apply !p-2;
  }

  .consent-section {
    @apply flex gap-8;
  }

  .consent-item {
    @apply flex items-center;
  }

  .checkbox-label {
    @apply flex items-center gap-2 cursor-pointer text-sm;
  }

  .checkbox-label input {
    @apply w-4 h-4 accent-primary;
  }

  /* Collapsible Sections */
  .detail-section.collapsible {
    @apply border border-slate-200 rounded-lg mb-3 overflow-hidden bg-white;
  }

  .section-header-btn {
    @apply flex justify-between items-center w-full py-3 px-4 bg-slate-50 border-0 cursor-pointer;
    transition: background 0.15s ease;
  }

  .section-header-btn:hover {
    @apply bg-slate-100;
  }

  .section-header-btn:focus-visible {
    @apply outline-2 outline-primary outline-offset-[-2px];
  }

  .section-header-btn .section-title {
    @apply mb-0;
  }

  .section-chevron {
    @apply text-slate-400 shrink-0;
    transition: transform 0.2s ease;
  }

  .section-chevron.open {
    transform: rotate(180deg);
  }

  .section-body {
    animation: slideDown 0.15s ease;
  }

  @keyframes slideDown {
    from {
      opacity: 0;
      transform: translateY(-4px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .data-grid {
    @apply grid gap-x-4 gap-y-1;
    grid-template-columns: repeat(2, 1fr);
  }

  .data-grid .data-row {
    @apply border-b-0 py-1.5;
  }

  .data-row.full-width {
    grid-column: 1 / -1;
  }

  .show-more-btn {
    @apply w-full py-2 mt-2 text-[13px] text-center bg-slate-50 rounded-lg;
    color: var(--primary);
  }

  .show-more-btn:hover {
    @apply bg-slate-100 no-underline;
  }

  /* Responsive Lead Detail */
  @media (min-width: 1400px) {
    .lead-detail-panel {
      width: clamp(420px, 30%, 550px);
      max-width: 550px;
    }
  }

  @media (max-width: 1200px) {
    .lead-detail-panel {
      @apply w-[380px] min-w-[340px];
    }

    .data-grid {
      grid-template-columns: 1fr;
    }
  }

  .lead-detail-backdrop {
    @apply hidden;
  }

  @media (max-width: 1024px) {
    .leads-container.with-detail {
      @apply relative;
    }

    .lead-detail-panel {
      @apply fixed right-0 top-0 h-screen z-50 shadow-xl;
      width: 420px;
      max-width: 90vw;
      animation: slideInRight 0.2s ease;
    }

    .lead-detail-backdrop {
      @apply block fixed inset-0 z-[49];
      background: rgb(0 0 0 / 0.3);
    }
  }

  /* Activity Timeline */
  .activity-timeline {
    @apply flex flex-col gap-0 py-2;
  }

  .timeline-item {
    @apply flex gap-3 py-3 relative;
  }

  .timeline-item:not(:last-child)::after {
    content: '';
    @apply absolute w-0.5 bg-slate-200;
    left: 11px;
    top: 34px;
    bottom: -12px;
  }

  .timeline-icon {
    @apply w-6 h-6 rounded-full flex items-center justify-center text-white shrink-0;
  }

  .timeline-content {
    @apply flex-1 min-w-0;
  }

  .timeline-header {
    @apply flex justify-between items-start gap-2 mb-1;
  }

  .timeline-title {
    @apply text-[13px] font-semibold text-black;
  }

  .timeline-time {
    @apply text-[11px] text-slate-400 whitespace-nowrap;
  }

  .timeline-description {
    @apply text-xs text-slate-600 m-0 mb-1;
  }

  .timeline-user {
    @apply text-[11px] text-slate-400;
  }
}
