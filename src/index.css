/* ==========================================================================
   Modern Utility Design System - Stadtwerke Konstanz (Tailwind v4)
   ========================================================================== */
@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&display=swap');

/* Tailwind Base Directives */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ==========================================================================
   1. Design Tokens & CSS Variables (for backwards compatibility)
   ========================================================================== */
@layer base {
  :root {
    /* Color Palette - Modern Slate Scale (Cool Grays) */
    --slate-50: #f8fafc;
    --slate-100: #f1f5f9;
    --slate-200: #e2e8f0;
    --slate-300: #cbd5e1;
    --slate-400: #94a3b8;
    --slate-500: #64748b;
    --slate-600: #475569;
    --slate-700: #334155;
    --slate-800: #1e293b;
    --slate-900: #0f172a;

    /* Brand Colors */
    --swk-red: #E2001A;
    --swk-red-dark: #b90015;
    --swk-red-light: #fff1f2;
    --swk-blue: #2358A1;
    --swk-blue-dark: #1a437d;
    --swk-blue-light: #eff6ff;

    /* Semantic Colors */
    --primary: var(--swk-red);
    --primary-hover: var(--swk-red-dark);
    --primary-light: var(--swk-red-light);
    --accent: var(--swk-blue);
    --accent-hover: var(--swk-blue-dark);
    --success: #2358A1;
    --success-light: #eff6ff;
    --warning: #64748b;
    --warning-light: #f1f5f9;
    --danger: #dc2626;
    --danger-hover: #b91c1c;
    --danger-light: #fef2f2;
    --info: #3b82f6;
    --info-light: #eff6ff;

    /* Surface & Backgrounds */
    --bg-app: #F6F6F6;
    --bg-surface: #ffffff;
    --bg-surface-hover: var(--slate-50);
    --bg-sidebar: #ffffff;

    /* Typography Colors */
    --text-primary: #000000;
    --text-secondary: var(--slate-600);
    --text-tertiary: var(--slate-400);
    --text-on-primary: #ffffff;

    /* Borders */
    --border-color: var(--slate-200);
    --border-hover: var(--slate-300);

    /* Shadows */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
    --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

    /* Layout */
    --sidebar-width: 280px;
    --header-height: 64px;
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-full: 9999px;

    /* Transitions */
    --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Reset & Base */
  *, *::before, *::after {
    @apply m-0 p-0 box-border;
  }

  body {
    font-family: 'Outfit', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    @apply bg-bg-app text-black leading-relaxed text-base font-light antialiased;
  }

  img, svg {
    @apply block max-w-full;
  }

  button, input, select, textarea {
    @apply font-inherit text-inherit;
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    @apply text-black font-bold leading-tight tracking-wide;
    font-family: 'Outfit', sans-serif;
  }

  h1 { @apply text-[40px] font-black; }
  h2 { @apply text-2xl font-bold; }
  h3 { @apply text-lg font-bold; }
  h4 { @apply text-lg font-semibold; }

  p {
    @apply mb-4 text-slate-600;
  }

  small {
    @apply text-sm text-slate-400;
  }
}

/* ==========================================================================
   2. Component Styles
   ========================================================================== */
@layer components {
  /* Accessibility */
  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
    clip: rect(0, 0, 0, 0);
  }

  /* Global Select */
  select {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    @apply py-2 pl-3 pr-9 text-sm text-black bg-white border border-slate-200 rounded-lg cursor-pointer;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.625rem center;
    background-size: 16px;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
  }

  select:hover { @apply border-slate-300; }
  select:focus {
    @apply outline-none border-primary;
    box-shadow: 0 0 0 3px var(--primary-light);
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  }
  select:disabled { @apply opacity-60 cursor-not-allowed bg-slate-50; }

  /* Layout */
  .main-layout {
    @apply flex min-h-screen;
    background-color: var(--bg-app);
  }

  .main-content {
    @apply flex-1 py-8 px-10;
    margin-left: var(--sidebar-width);
    max-width: 1600px;
  }

  /* Sidebar */
  .sidebar {
    @apply fixed top-0 left-0 h-screen flex flex-col py-6 z-50 bg-white border-r border-slate-200 shadow-sm;
    width: var(--sidebar-width);
  }

  .sidebar-footer {
    @apply p-6 border-t border-slate-200 mt-auto;
  }

  .user-profile { @apply flex items-center gap-3; }
  .user-avatar {
    @apply w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold text-white;
    background-color: var(--primary);
  }
  .user-info { @apply flex flex-col; }
  .user-name { @apply text-sm font-semibold text-black leading-tight; }
  .user-role { @apply text-xs text-slate-400; }

  .logo-area {
    @apply px-6 pb-6 border-b border-slate-200 mb-6 flex items-center justify-between;
  }

  .nav-container { @apply flex-1 overflow-y-auto px-3; }
  .nav-section { @apply mb-6; }
  .nav-label {
    @apply px-3 text-xs font-semibold uppercase tracking-wider text-slate-400 mb-2;
  }

  .nav-item {
    @apply flex items-center gap-3 py-2.5 px-3 text-slate-600 no-underline rounded-xl font-medium cursor-pointer border border-transparent;
    transition: var(--transition);
  }
  .nav-item:hover { @apply bg-slate-100 text-black; }
  .nav-item.active {
    background-color: var(--primary-light);
    color: var(--primary);
    border-color: rgba(35, 88, 161, 0.1);
  }

  /* Cards */
  .card {
    @apply bg-white border border-slate-200 rounded-xl shadow p-6 mb-6;
    transition: var(--transition);
  }
  .card:hover {
    @apply shadow-md border-slate-300;
    transform: translateY(-1px);
  }
  .card-header { @apply flex items-center justify-between mb-6; }
  .card-header h3 { @apply text-lg font-semibold text-black; }
  .card.full-width { grid-column: 1 / -1; }

  /* KPI Cards */
  .kpi-bar {
    @apply grid gap-6 mb-8;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  }

  .kpi-card {
    @apply bg-white border border-slate-200 rounded-xl p-6 flex items-center gap-5 shadow-sm;
    transition: var(--transition);
  }
  .kpi-card:hover {
    @apply shadow-md;
    transform: translateY(-2px);
  }

  .kpi-icon {
    @apply w-12 h-12 rounded-xl flex items-center justify-center shrink-0 bg-slate-100 text-slate-600;
  }
  .kpi-icon.variant-primary { background-color: var(--primary-light); color: var(--primary); }
  .kpi-icon.variant-secondary { background-color: var(--swk-blue-light); color: var(--swk-blue); }
  .kpi-icon.variant-success { background-color: var(--success-light); color: var(--success); }
  .kpi-icon.variant-warning { background-color: var(--warning-light); color: var(--warning); }

  .kpi-content { @apply flex flex-col; }
  .kpi-value { @apply text-3xl font-bold text-black leading-tight tracking-tight; }
  .kpi-label { @apply text-sm text-slate-600 font-medium; }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 py-3 px-6 text-[15px] font-bold rounded-xl cursor-pointer border border-transparent no-underline;
    transition: var(--transition);
    line-height: 1.25;
  }
  .btn-sm { @apply py-1.5 px-3 text-[13px] gap-1.5; }

  .btn-primary {
    background-color: var(--primary);
    color: var(--text-on-primary);
    @apply shadow-sm;
  }
  .btn-primary:hover {
    background-color: var(--primary-hover);
    @apply shadow-md;
  }

  .btn-secondary {
    @apply bg-white border-slate-200 text-slate-600 shadow-sm;
  }
  .btn-secondary:hover { @apply bg-slate-50 border-slate-300 text-black; }

  .btn-link {
    @apply bg-transparent p-0 font-medium;
    color: var(--primary);
  }
  .btn-link:hover { @apply underline; }

  .btn-danger { background: var(--danger); @apply text-white; }
  .btn-danger:hover { background: var(--danger-hover); }

  .btn:focus-visible,
  .nav-item-new:focus-visible,
  .section-tab:focus-visible,
  .tenant-button:focus-visible,
  .mobile-menu-btn:focus-visible,
  .toggle-btn:focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 3px rgba(226, 0, 26, 0.4);
  }

  /* Inputs */
  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="search"],
  input[type="url"],
  textarea {
    @apply block w-full py-2.5 px-3.5 text-[15px] text-black bg-white border border-slate-300 rounded-xl shadow-sm;
    transition: var(--transition);
  }

  input:focus, textarea:focus {
    @apply outline-none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(226, 0, 26, 0.4);
  }

  input::placeholder { @apply text-slate-400; }

  /* Tables */
  .table-wrapper {
    @apply overflow-x-auto border border-slate-200 rounded-xl;
  }

  .data-table {
    @apply w-full bg-white text-[15px];
    border-collapse: collapse;
  }

  .data-table th {
    @apply py-3.5 px-6 text-left text-xs font-semibold uppercase tracking-wider text-slate-500 bg-slate-50 border-b border-slate-200;
  }

  .data-table td {
    @apply py-4 px-6 border-b border-slate-200 text-black;
  }

  .data-table tbody tr:last-child td { @apply border-b-0; }
  .data-table tbody tr:nth-child(even) { @apply bg-slate-50; }
  .data-table tbody tr:hover { @apply bg-slate-100; }
  .data-table tbody tr:focus-visible {
    @apply outline-none;
    box-shadow: inset 0 0 0 2px var(--primary);
    background-color: var(--primary-light);
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center py-1 px-2.5 rounded-full text-xs font-semibold leading-none uppercase tracking-tight;
  }
  .badge.success { background-color: var(--success-light); color: var(--success); }
  .badge.warning { background-color: var(--warning-light); color: var(--warning); }
  .badge.danger { background-color: var(--danger-light); color: var(--danger); }
  .badge.info { background-color: var(--info-light); color: var(--info); }
  .badge.neutral { @apply bg-slate-100 text-slate-600; }

  /* Tabs */
  .section-tabs {
    @apply flex gap-4 border-b border-slate-200 mb-8;
  }

  .section-tab {
    @apply py-3 px-1 bg-transparent border-0 text-[15px] font-medium text-slate-600 cursor-pointer border-b-2 border-transparent flex items-center gap-2;
    transition: var(--transition);
  }
  .section-tab:hover { @apply text-black; }
  .section-tab.active {
    color: var(--primary);
    border-bottom-color: var(--primary);
  }

  /* Grid Utilities */
  .content-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(2, 1fr);
  }
  .grid-3 {
    @apply grid gap-6;
    grid-template-columns: repeat(3, 1fr);
  }

  /* Form Elements */
  .form-row {
    @apply grid gap-6 mb-6;
    grid-template-columns: 1fr 1fr;
  }
  .form-group label {
    @apply block text-sm font-semibold text-black mb-2;
  }
  .form-hint {
    @apply block mt-1.5 text-xs text-slate-400;
  }

  /* Toast */
  .toast {
    @apply fixed bottom-6 right-6 z-[9999] py-4 px-6 text-white rounded-lg shadow-lg text-[15px] flex items-center gap-3 max-w-[420px] opacity-0 pointer-events-none;
    background: var(--slate-900);
    transform: translateY(12px);
    transition: opacity 0.2s ease, transform 0.2s ease;
  }
  .toast.show {
    @apply opacity-100 pointer-events-auto;
    transform: translateY(0);
  }

  /* URL Output */
  .url-output {
    @apply bg-slate-50 border border-slate-200 p-4 rounded-lg flex items-center justify-between gap-4;
  }
  .url-output code {
    @apply font-mono text-sm break-all;
    color: var(--swk-blue);
  }

  /* Chart Container */
  .chart-container { @apply relative w-full; }

  /* Action Buttons */
  .action-buttons { @apply flex gap-1.5; }

  /* Status Dot */
  .status-dot { @apply inline-block w-3 h-3 rounded-full; }
  .status-dot.success { background: var(--success); }
  .status-dot.warning { background: var(--warning); }
  .status-dot.danger { background: var(--danger); }

  /* Status Badge */
  .status-badge {
    @apply text-xs py-1 px-2 rounded-full font-semibold uppercase;
  }
  .status-badge.active { background-color: var(--success-light); color: var(--success); }
  .status-badge.vacation { background-color: var(--warning-light); color: var(--warning); }

  /* Score Badge */
  .score-badge {
    @apply inline-flex items-center justify-center min-w-[36px] py-1 px-2 rounded-full text-xs font-bold;
  }
  .score-badge.high { background: var(--success-light); color: var(--success); }
  .score-badge.medium { background: var(--warning-light); @apply text-slate-700; }
  .score-badge.low { background: var(--danger-light); color: var(--danger); }
  .score-badge.variant-hot { background-color: var(--danger-light); color: var(--danger); }
  .score-badge.variant-sql { background-color: var(--success-light); color: var(--success); }
  .score-badge.variant-mql { background-color: var(--swk-blue-light); color: var(--swk-blue); }
  .score-badge.variant-new { @apply bg-slate-100 text-slate-400; }

  /* Trend Indicators */
  .trend-up { color: var(--success); }
  .trend-down { color: var(--danger); }
  .trend-stable { @apply text-slate-400 font-bold; }

  /* Toggle Switch */
  .toggle { @apply relative inline-block w-11 h-6; }
  .toggle input { @apply opacity-0 w-0 h-0; }
  .toggle-slider {
    @apply absolute cursor-pointer inset-0 bg-slate-300 rounded-full;
    transition: .4s;
  }
  .toggle-slider:before {
    @apply absolute h-[18px] w-[18px] left-[3px] bottom-[3px] bg-white rounded-full;
    content: "";
    transition: .4s;
  }
  input:checked + .toggle-slider { background-color: var(--primary); }
  input:checked + .toggle-slider:before { transform: translateX(20px); }

  /* Button Icon */
  .btn-icon {
    @apply flex items-center justify-center w-7 h-7 p-0 border-0 bg-transparent text-slate-600 rounded cursor-pointer;
    transition: all 0.15s ease;
  }
  .btn-icon:hover {
    background-color: var(--primary-light);
    color: var(--primary);
  }

  /* Quick Actions */
  .quick-actions { @apply flex items-center gap-1; }

  /* Leads Toggle */
  .leads-toggle { @apply flex bg-slate-100 rounded-lg p-1; }
  .toggle-btn {
    @apply py-2 px-4 border-0 bg-transparent text-slate-600 text-[13px] font-medium rounded cursor-pointer whitespace-nowrap;
    transition: all 0.15s ease;
  }
  .toggle-btn:hover { @apply text-black; }
  .toggle-btn.active {
    @apply bg-white shadow-sm;
    color: var(--primary);
  }

  /* Search Box */
  .search-box {
    @apply flex items-center gap-2 py-2 px-3 bg-white border border-slate-200 rounded-xl;
  }
  .search-box input {
    @apply border-0 bg-transparent p-0 text-sm flex-1 min-w-[180px];
  }
  .search-box input:focus { @apply outline-none shadow-none; }

  /* Form Input */
  .form-input {
    @apply w-full py-2.5 px-3 text-sm leading-snug text-black bg-white border border-slate-200 rounded-lg;
    transition: border-color 0.15s ease, box-shadow 0.15s ease;
    font-family: inherit;
  }
  .form-input:hover { @apply border-slate-300; }
  .form-input:focus {
    @apply outline-none;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px var(--primary-light);
  }
  .form-input::placeholder { @apply text-slate-400; }
  textarea.form-input { @apply resize-y min-h-[60px]; }

  select.form-input {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px;
    @apply pr-10 cursor-pointer;
  }
  select.form-input:focus {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23dc2626' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
  }
}

/* ==========================================================================
   3. View-Specific Styles
   ========================================================================== */
@layer components {
  /* Lead Magnets Grid */
  .lead-magnets-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }

  .lead-magnet-card {
    @apply bg-white border border-slate-200 rounded-xl p-6 flex flex-col gap-5 relative overflow-hidden;
    transition: var(--transition);
  }
  .lead-magnet-card:hover {
    @apply shadow-md border-slate-300;
    transform: translateY(-2px);
  }

  .magnet-header { @apply flex items-start gap-4; }
  .magnet-icon {
    @apply w-12 h-12 rounded-lg flex items-center justify-center shrink-0;
    color: var(--primary);
    background-color: var(--primary-light);
  }
  .magnet-info { @apply flex-1 min-w-0; }
  .magnet-info h4 { @apply text-base font-semibold text-black mb-1 leading-tight; }
  .magnet-type { @apply text-xs text-slate-400 uppercase tracking-wider font-semibold; }
  .magnet-description {
    @apply text-sm text-slate-600 leading-relaxed;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .magnet-metrics {
    @apply grid gap-4 pt-4 border-t border-b border-slate-200;
    grid-template-columns: repeat(2, 1fr);
  }
  .metric { @apply flex flex-col items-start min-w-0; }
  .metric.highlight .metric-value { color: var(--primary); }
  .metric-value { @apply text-base font-bold text-black leading-tight; }
  .metric-label { @apply text-xs text-slate-400; }

  .magnet-funnel { @apply bg-slate-50 rounded-lg p-4 mt-auto; }
  .magnet-funnel h5 { @apply text-xs uppercase text-slate-400 mb-3 font-semibold; }

  .funnel-steps { @apply flex flex-col gap-3; }
  .funnel-step { @apply flex items-center gap-3 text-xs; }
  .step-bar { @apply flex-1 h-1.5 bg-slate-200 rounded-full overflow-hidden; }
  .step-fill { @apply h-full rounded-full; transition: width 0.5s ease; }
  .step-info { @apply w-[150px] flex justify-between items-center text-slate-600; }
  .step-name { @apply whitespace-nowrap overflow-hidden text-ellipsis; }
  .step-dropoff { @apply flex items-center gap-0.5 font-semibold; color: var(--danger); }

  /* Journeys Grid */
  .journeys-grid, .templates-grid, .assets-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }
  .assets-grid { grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); }

  .list-header { @apply flex justify-between items-center mb-6; }

  .journey-card, .template-card, .asset-card {
    @apply bg-white border border-slate-200 rounded-xl p-6 flex flex-col gap-5 relative h-full;
    transition: var(--transition);
  }
  .journey-card:hover, .template-card:hover, .asset-card:hover {
    @apply shadow-md border-slate-300;
    transform: translateY(-2px);
  }

  .journey-header, .template-header { @apply flex justify-between items-start gap-4; }
  .journey-info h4, .template-info h4, .asset-info h4 {
    @apply text-base font-semibold text-black mb-1 leading-tight;
  }
  .journey-info p {
    @apply text-sm text-slate-600 leading-relaxed mb-0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .journey-stats {
    @apply grid gap-3 py-4 border-t border-b border-slate-200;
    grid-template-columns: repeat(2, 1fr);
  }
  .journey-stats .stat { @apply flex items-center gap-2 text-[13px] text-slate-600; }
  .journey-stats .stat.highlight { color: var(--primary); @apply font-medium; }

  .journey-meta { @apply flex justify-between text-xs text-slate-400; }
  .journey-actions, .template-actions, .asset-actions { @apply flex gap-2 mt-auto flex-wrap; }

  /* Template Card */
  .template-category { @apply text-xs text-slate-400 uppercase tracking-wider font-semibold; }
  .template-subject {
    @apply flex items-center gap-2 text-sm text-slate-600 italic bg-slate-50 p-2 rounded;
  }
  .template-stats {
    @apply grid gap-2 text-center py-3 border-t border-slate-200;
    grid-template-columns: repeat(3, 1fr);
  }
  .template-stats .stat { @apply flex flex-col; }
  .template-stats .stat-value { @apply font-semibold text-black; }
  .template-stats .stat-label { @apply text-xs text-slate-400; }

  .ab-test-result {
    @apply text-[13px] p-2 rounded flex justify-between font-medium;
    background-color: var(--success-light);
    color: var(--success);
  }

  /* Asset Card */
  .asset-preview { @apply h-[120px] bg-slate-50 rounded-lg flex items-center justify-center text-slate-400; }
  .asset-meta { @apply flex justify-between text-xs text-slate-400 mt-1; }
  .asset-downloads { @apply flex items-center gap-1 text-xs text-slate-600 mt-2; }

  /* Funnel Visualization */
  .funnel-visualization { @apply flex flex-col items-center gap-2 py-8; }
  .funnel-stage { @apply flex flex-col items-center gap-2 w-full; }
  .funnel-bar {
    @apply h-12 bg-slate-200 rounded-xl flex items-center justify-between px-6 text-white font-semibold min-w-[200px] max-w-full shadow-sm;
    transition: width 0.5s ease;
  }
  .funnel-label { @apply text-sm; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
  .funnel-value { @apply text-base; }
  .funnel-conversion {
    @apply flex items-center justify-center gap-2 text-xs text-slate-600 py-1 px-3 bg-slate-100 rounded-full border border-slate-200 font-medium -my-1 z-10;
  }

  /* Product Breakdown */
  .product-breakdown { @apply flex flex-col gap-4; }
  .product-row {
    @apply flex justify-between items-center p-3 border border-slate-200 rounded-lg bg-white;
  }
  .product-info { @apply flex flex-col; }
  .product-name { @apply font-semibold text-black; }
  .product-leads { @apply text-xs text-slate-400; }
  .product-metrics { @apply flex gap-4 items-center text-sm; }
  .product-metrics .metric { @apply text-slate-600; }
  .product-metrics .metric.highlight { color: var(--primary); @apply font-semibold; }

  /* Sales Reps Grid */
  .sales-reps-grid, .integrations-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }

  .sales-rep-card, .integration-card {
    @apply bg-white border border-slate-200 rounded-xl p-6 flex flex-col gap-4;
    transition: var(--transition);
  }
  .sales-rep-card:hover, .integration-card:hover {
    @apply shadow-md border-slate-300;
    transform: translateY(-2px);
  }

  .rep-header, .integration-header { @apply flex items-center gap-4; }
  .rep-avatar {
    @apply w-12 h-12 rounded-full bg-slate-100 flex items-center justify-center text-slate-600;
  }
  .integration-icon {
    @apply w-10 h-10 rounded-lg bg-slate-50 flex items-center justify-center;
    color: var(--primary);
  }

  .rep-info, .integration-info { @apply flex-1; }
  .rep-info h4, .integration-info h4 { @apply text-base font-semibold mb-0.5; }
  .rep-department, .integration-type {
    @apply text-xs text-slate-400 uppercase tracking-wider font-semibold;
  }

  .rep-contact { @apply flex flex-col gap-2 text-sm text-slate-600; }
  .rep-contact a { @apply flex items-center gap-2 no-underline text-inherit; transition: color 0.2s; }
  .rep-contact a:hover { color: var(--primary); }

  .rep-stats {
    @apply grid gap-2 pt-4 border-t border-slate-200 mt-auto;
    grid-template-columns: repeat(4, 1fr);
  }
  .rep-stats .stat { @apply flex flex-col items-center text-center; }
  .rep-stats .stat-value { @apply font-semibold text-sm text-black; }
  .rep-stats .stat-label { @apply text-[10px] text-slate-400 uppercase; }
  .rep-stats .stat.highlight .stat-value { color: var(--primary); }

  /* Integration */
  .integration-status { @apply flex items-center gap-2 text-xs font-semibold; }
  .integration-description { @apply text-sm text-slate-600 leading-relaxed; }
  .integration-meta { @apply grid gap-2 p-3 bg-slate-50 rounded-lg; }
  .meta-item { @apply flex items-center gap-2 text-xs text-slate-600; }
  .integration-error {
    @apply flex items-center gap-2 text-xs p-2 rounded;
    color: var(--danger);
    background-color: var(--danger-light);
  }
  .integration-actions { @apply flex gap-2 mt-auto; }
  .error-message { color: var(--danger); @apply text-sm; }

  /* Avatar Circle */
  .avatar-circle {
    @apply w-7 h-7 rounded-full bg-slate-100 flex items-center justify-center text-xs font-bold text-slate-600 shrink-0;
  }

  /* Funnel Chart */
  .funnel-chart-wrapper { @apply w-full h-80 relative; }

  /* News Feed Timeline */
  .news-feed-list {
    @apply relative pt-2 pb-2;
    padding-left: 1.5rem;
  }
  .news-feed-list::before {
    content: '';
    @apply absolute top-0 bottom-0 w-0.5 bg-slate-200 z-0;
    left: 15px;
  }

  .news-item { @apply relative flex gap-4 mb-5 z-10 cursor-pointer; }
  .news-item:last-child { @apply mb-0; }

  .news-icon-wrapper {
    @apply w-8 h-8 rounded-full flex items-center justify-center shrink-0 bg-white z-[2];
    box-shadow: 0 0 0 4px var(--bg-surface);
    transition: transform 0.2s;
  }
  .news-item:hover .news-icon-wrapper { transform: scale(1.1); }

  .news-content-card {
    @apply flex-1 bg-slate-50 py-3.5 px-4 rounded-xl border border-slate-200 relative flex flex-col gap-1;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .news-content-card::before {
    content: '';
    @apply absolute w-2 h-2 bg-slate-50 border-l border-b border-slate-200;
    left: -5px;
    top: 14px;
    transform: rotate(45deg);
    transition: inherit;
  }

  .news-item:hover .news-content-card {
    @apply bg-white shadow-md;
    border-color: var(--primary-light);
    transform: translateX(4px);
  }
  .news-item:hover .news-content-card::before {
    @apply bg-white;
    border-color: var(--primary-light);
  }

  .news-header { @apply flex justify-between items-start gap-4; }
  .news-message { @apply text-[15px] font-semibold text-black leading-snug; }
  .news-details { @apply text-sm text-slate-600 leading-relaxed mt-1; }
  .news-meta { @apply flex items-center gap-3 mt-2 text-xs text-slate-400; }
  .news-meta-item { @apply flex items-center gap-1.5; }
  .news-time {
    @apply text-xs text-slate-400 whitespace-nowrap bg-white py-0.5 px-1.5 rounded border border-slate-200;
    font-family: 'Outfit', monospace;
  }
  .news-footer { @apply text-xs text-slate-600; }

  .news-date-header { @apply relative z-10 my-8 flex justify-center pl-0; }
  .news-date-header h4 {
    @apply -ml-1.5 bg-slate-100 py-1 px-3 rounded-full text-xs font-bold text-slate-600 border border-slate-200 uppercase tracking-wider z-[2];
    box-shadow: 0 0 0 4px var(--bg-app);
  }

  /* Timers Grid */
  .timers-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  }

  .timer-card {
    @apply bg-white border border-slate-200 rounded-xl p-6 flex flex-col gap-5;
    transition: var(--transition);
  }
  .timer-card:hover {
    @apply shadow-md border-slate-300;
    transform: translateY(-2px);
  }

  .timer-header { @apply flex items-start gap-4; }
  .timer-icon {
    @apply w-12 h-12 rounded-lg flex items-center justify-center shrink-0 bg-slate-50;
    color: var(--primary);
  }
  .timer-info { @apply flex-1; }
  .timer-info h4 { @apply text-base font-semibold text-black mb-1; }
  .timer-info p { @apply text-sm text-slate-600 leading-snug; }

  .timer-config { @apply flex gap-4 p-3 bg-slate-50 rounded-lg; }
  .config-item { @apply flex items-center gap-2 text-[13px] text-slate-600; }

  .timer-stats {
    @apply grid gap-2 py-4 border-t border-b border-slate-200 text-center;
    grid-template-columns: repeat(3, 1fr);
  }
  .timer-stats .stat { @apply flex flex-col; }
  .timer-stats .stat-value { @apply font-semibold text-black; }
  .timer-stats .stat.highlight .stat-value { color: var(--primary); }
  .timer-stats .stat-label { @apply text-xs text-slate-400; }
  .timer-actions { @apply flex gap-2 mt-auto; }

  /* Coupons */
  .coupons-list {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  }
  .coupon-card { @apply border border-slate-200 rounded-lg p-4 bg-white; }
  .coupon-header { @apply flex items-center gap-2 mb-3; }
  .coupon-code { @apply font-mono font-semibold py-1 px-2 bg-slate-100 rounded text-base; }
  .coupon-status { @apply text-xs font-semibold ml-auto uppercase; }
  .coupon-description { @apply text-sm text-slate-600 mb-3; }
  .coupon-details { @apply flex justify-between text-xs text-slate-400 mb-2; }
  .coupon-progress { @apply h-1.5 bg-slate-100 rounded-full overflow-hidden; }
  .progress-bar { @apply h-full rounded-full; background-color: var(--primary); }

  /* Referral */
  .referral-stats-summary {
    @apply grid gap-4 p-6 bg-slate-50 rounded-lg mb-6;
    grid-template-columns: repeat(4, 1fr);
  }
  .stat-box { @apply flex flex-col items-center text-center; }
  .stat-box .stat-value { @apply text-2xl font-bold text-black; }
  .stat-box.highlight .stat-value { color: var(--primary); }
  .stat-box .stat-label { @apply text-[13px] text-slate-400; }

  .referral-tree { @apply flex flex-col gap-4; }
  .referrer-node { @apply border border-slate-200 rounded-lg overflow-hidden; }
  .referrer-header {
    @apply p-4 bg-slate-50 flex justify-between items-center border-b border-slate-200;
  }
  .referrer-info { @apply flex items-center gap-3 font-semibold; }
  .referrer-reward { @apply text-sm font-semibold; color: var(--success); }
  .referrals-list { @apply py-2; }
  .referral-item { @apply flex items-center gap-4 py-3 px-6 text-sm text-slate-600; }
  .referral-item:not(:last-child) { @apply border-b border-slate-100; }
  .ref-name { @apply font-medium text-black w-[150px]; }
  .ref-product { @apply w-[120px]; }
  .ref-status { @apply flex items-center gap-2 text-xs; }
  .ref-status.completed { color: var(--success); }
  .ref-status.pending { color: var(--warning); }
  .ref-value { @apply ml-auto font-semibold; }

  /* Churn */
  .churn-summary { @apply flex gap-4; }
  .risk-count { @apply text-[13px] font-semibold py-1 px-3 rounded-full; }
  .risk-count.high { background-color: var(--danger-light); color: var(--danger); }
  .risk-count.medium { background-color: var(--warning-light); color: var(--warning); }
  .risk-count.low { background-color: var(--success-light); color: var(--success); }

  .churn-metrics-bar {
    @apply grid gap-4 mb-6;
    grid-template-columns: repeat(4, 1fr);
  }
  .churn-metrics-bar .metric-card {
    @apply p-4 border border-slate-200 rounded-lg text-center flex flex-col bg-white;
  }

  .risk-factors { @apply flex gap-2 flex-wrap; }
  .risk-factor { @apply text-xs bg-slate-100 py-0.5 px-2 rounded text-slate-600; }
  .recommendation { @apply text-[13px] font-medium; color: var(--primary); }

  /* NPS */
  .nps-display { @apply flex items-center gap-12 py-8; }
  .nps-score-large {
    @apply flex flex-col items-center p-8 bg-slate-50 rounded-full w-40 h-40 justify-center;
    border: 4px solid var(--primary);
  }
  .nps-score-large .score { @apply text-5xl font-bold leading-none; color: var(--primary); }
  .nps-score-large .label { @apply text-sm text-slate-600 mt-1; }

  .nps-breakdown { @apply flex-1 flex flex-col gap-4; }
  .nps-segment { @apply flex items-center gap-4 py-3 px-4 rounded-lg; }
  .nps-segment.promoters { background-color: var(--success-light); color: var(--success); }
  .nps-segment.passives { background-color: var(--warning-light); color: var(--warning); }
  .nps-segment.detractors { background-color: var(--danger-light); color: var(--danger); }
  .nps-segment .percentage { @apply text-xl font-bold min-w-[60px]; }
  .nps-segment .label { @apply font-semibold; }

  .feedback-list { @apply flex flex-col gap-4; }
  .feedback-item { @apply flex gap-4 p-4 border-b border-slate-200; }
  .feedback-item:last-child { @apply border-b-0; }
  .feedback-score {
    @apply w-10 h-10 rounded-lg flex items-center justify-center font-bold text-lg shrink-0;
  }
  .feedback-content { @apply flex-1; }
  .feedback-header { @apply flex justify-between mb-2; }
  .feedback-header strong { @apply text-black; }
  .feedback-header span { @apply text-xs text-slate-400; }
  .feedback-content p { @apply m-0 text-sm text-slate-600; }

  /* Thresholds */
  .thresholds-card .card-header { @apply mb-6; }
  .thresholds-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  }
  .threshold-item { @apply flex flex-col gap-2 p-4 bg-slate-50 rounded-lg border border-slate-200; }
  .threshold-label { @apply flex flex-col gap-1 text-sm text-slate-600; }
  .threshold-badge {
    @apply inline-flex items-center justify-center py-1 px-2 rounded font-semibold text-xs w-fit;
  }
  .threshold-badge.variant-mql { background-color: var(--swk-blue-light); color: var(--swk-blue); }
  .threshold-badge.variant-sql { background-color: var(--success-light); color: var(--success); }
  .threshold-badge.variant-hot { background-color: var(--danger-light); color: var(--danger); }

  .scoring-table tr.inactive { @apply opacity-60 bg-slate-50; }
  .rule-info { @apply flex flex-col; }
  .rule-info strong { @apply text-black; }
  .rule-info span { @apply text-xs text-slate-600; }

  .category-badge {
    @apply inline-flex items-center gap-2 py-1 px-3 bg-slate-100 rounded-full text-xs text-slate-600 font-medium;
  }
  .condition-code {
    @apply font-mono text-[13px] py-1 px-2 bg-slate-100 rounded;
    color: var(--primary);
  }
  .points-input { @apply w-20 text-right font-semibold; }
  .points-input.positive { color: var(--success); }
  .points-input.negative { color: var(--danger); }

  /* Kanban */
  .pipeline-section { @apply overflow-x-auto -m-6 p-6; height: calc(100vh - 250px); }
  .kanban-board { @apply flex gap-6 h-full min-w-[1200px]; }
  .kanban-column { @apply flex-1 min-w-[280px] bg-slate-50 rounded-xl flex flex-col h-full; }
  .kanban-column-header {
    @apply p-4 border-b-2 border-transparent flex justify-between items-center bg-white;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }
  .kanban-column-header h4 { @apply text-sm font-semibold uppercase m-0; }
  .column-count { @apply text-xs bg-slate-100 py-0.5 px-2 rounded-full text-slate-600 font-semibold; }
  .kanban-cards { @apply p-4 overflow-y-auto flex flex-col gap-4 flex-1; }

  .kanban-card {
    @apply bg-white border border-slate-200 rounded-lg p-4 shadow-sm cursor-pointer;
    transition: var(--transition);
  }
  .kanban-card:hover { @apply shadow-md; transform: translateY(-2px); }
  .kanban-card .card-header { @apply flex justify-between items-center mb-3; }
  .lead-number { @apply text-xs text-slate-400 font-mono; }
  .kanban-card .card-content h5 { @apply text-[15px] font-semibold mb-1 text-black; }
  .lead-product { @apply text-xs font-medium block mb-3; color: var(--primary); }
  .kanban-card .card-footer { @apply flex justify-between items-center border-t border-slate-100 pt-3; }
  .lead-date { @apply text-xs text-slate-400; }
  .qualification-badge { @apply text-[10px] uppercase font-semibold py-0.5 px-1.5 rounded-sm; }
  .kanban-empty { @apply text-center p-8 text-slate-400 text-sm italic; }

  .change-badge { @apply inline-flex items-center gap-1 font-semibold; }
  .change-badge.positive { color: var(--success); }
  .change-badge.negative { color: var(--danger); }

  /* Variable Key */
  .variable-key {
    @apply inline-block py-0.5 px-1.5 bg-slate-100 border border-slate-200 rounded font-mono text-xs text-slate-600 mb-1;
  }
  .variable-label { @apply font-medium text-black; }
  .variable-input { @apply w-[120px] py-1 px-2 text-sm; }
}

/* ==========================================================================
   4. Journey Builder Styles
   ========================================================================== */
@layer components {
  .journey-builder {
    @apply flex flex-col rounded-xl overflow-hidden border border-slate-200 relative;
    height: calc(100vh - 100px);
    background-color: var(--bg-app);
  }

  .builder-header {
    @apply py-4 px-6 bg-white border-b border-slate-200 flex justify-between items-center z-10 shadow-sm;
  }
  .builder-title h3 { @apply m-0 text-lg font-semibold; }
  .builder-subtitle { @apply text-sm text-slate-600; }
  .builder-actions { @apply flex gap-3; }

  .builder-content {
    @apply flex-1 flex relative overflow-hidden bg-slate-50;
    background-image: radial-gradient(var(--slate-300) 1px, transparent 1px);
    background-size: 20px 20px;
  }

  .node-palette {
    @apply w-60 bg-white border-r border-slate-200 p-6 flex flex-col gap-6 z-[5] shadow-sm overflow-y-auto;
  }
  .palette-section { @apply flex flex-col gap-3; }
  .palette-label { @apply text-xs font-semibold uppercase text-slate-400 tracking-wider; }
  .palette-item {
    @apply flex items-center gap-3 py-3 px-4 bg-white border border-slate-200 rounded-lg cursor-grab text-sm font-medium text-slate-600 select-none;
    transition: var(--transition);
  }
  .palette-item:hover {
    border-color: var(--primary);
    color: var(--primary);
    @apply shadow-sm;
    transform: translateY(-1px);
  }
  .palette-item:active { @apply cursor-grabbing; }

  .journey-canvas { @apply flex-1 relative overflow-hidden cursor-grab; transform-origin: 0 0; }
  .journey-canvas:active { @apply cursor-grabbing; }
  .canvas-viewport { @apply absolute top-0 left-0 w-full h-full pointer-events-none; transform-origin: 0 0; }

  .connections-layer { @apply absolute top-0 left-0 w-full h-full pointer-events-none z-[1] overflow-visible; }

  .journey-node {
    @apply absolute w-60 bg-white border border-slate-200 rounded-xl shadow-sm flex flex-col cursor-pointer z-[2] pointer-events-auto;
    border-left: 4px solid var(--node-color, var(--slate-400));
    transition: box-shadow 0.2s, border-color 0.2s;
  }
  .journey-node:hover { @apply shadow-md border-slate-300; }
  .journey-node.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px var(--primary-light), var(--shadow-md);
    @apply z-[3];
  }

  .node-header {
    @apply py-3 px-4 border-b border-slate-200 flex items-center gap-3 bg-slate-50;
    border-top-right-radius: var(--radius-lg);
  }
  .node-icon { @apply w-6 h-6 flex items-center justify-center; color: var(--node-color); }
  .node-type { @apply text-xs font-semibold text-slate-600 uppercase flex-1; }
  .node-content { @apply p-4 flex flex-col gap-1; }
  .node-label { @apply font-semibold text-black text-[15px]; }
  .node-detail { @apply text-xs text-slate-600; }

  .node-handle {
    @apply absolute w-3 h-3 bg-white rounded-full z-[4] cursor-crosshair;
    border: 2px solid var(--node-color);
    transition: var(--transition);
  }
  .node-handle:hover { background-color: var(--node-color); transform: scale(1.2); }
  .node-handle.source { @apply right-[-6px] top-1/2 -translate-y-1/2; }
  .node-handle.target { @apply left-[-6px] top-1/2 -translate-y-1/2 bg-slate-200 border-slate-400 cursor-default; }

  .node-toolbar {
    @apply absolute -top-10 right-0 flex gap-1 p-1 bg-slate-800 rounded-lg shadow-lg z-[100] opacity-0 pointer-events-none;
    transform: translateY(10px);
    transition: all 0.2s ease;
  }
  .journey-node.selected .node-toolbar { @apply opacity-100 pointer-events-auto; transform: translateY(0); }

  .toolbar-btn {
    @apply w-7 h-7 flex items-center justify-center text-slate-200 rounded cursor-pointer bg-transparent border-0;
  }
  .toolbar-btn:hover { @apply bg-slate-700 text-white; }
  .toolbar-btn.delete:hover { background-color: var(--danger); }

  .canvas-controls {
    @apply absolute bottom-6 right-6 flex flex-col gap-2 bg-white p-2 rounded-lg shadow-md border border-slate-200 z-10;
  }
  .control-btn {
    @apply w-8 h-8 flex items-center justify-center text-slate-600 rounded cursor-pointer bg-transparent border-0;
    transition: var(--transition);
  }
  .control-btn:hover { @apply bg-slate-100; color: var(--primary); }

  .node-config-panel {
    @apply w-[300px] bg-white border-l border-slate-200 p-6 z-20 overflow-y-auto absolute right-0 top-0 bottom-0;
    box-shadow: -4px 0 15px rgba(0, 0, 0, 0.05);
    animation: slideInRight 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes slideInRight {
    from { transform: translateX(100%); }
    to { transform: translateX(0); }
  }
}

/* ==========================================================================
   5. Timeline Builder Styles
   ========================================================================== */
@layer components {
  .timeline-builder {
    @apply max-w-[800px] mx-auto p-8 flex flex-col items-center relative bg-transparent;
  }
  .timeline-builder::before {
    content: '';
    @apply absolute top-0 bottom-0 left-1/2 w-0.5 bg-slate-300 -translate-x-1/2 z-0;
  }

  .timeline-node {
    @apply relative w-[400px] bg-white border border-slate-200 rounded-xl p-4 my-2 z-[1] flex items-center gap-4 shadow-sm cursor-pointer;
    transition: var(--transition);
  }
  .timeline-node:hover {
    @apply shadow-md;
    border-color: var(--primary);
    transform: translateY(-1px);
  }
  .timeline-node.condition:hover { @apply border-slate-500; }
  .timeline-node.selected {
    border-color: var(--primary);
    box-shadow: 0 0 0 2px var(--primary-light), var(--shadow-md);
  }
  .timeline-node.condition.selected { @apply border-slate-500; box-shadow: 0 0 0 2px var(--slate-200), var(--shadow-md); }
  .timeline-node.trigger { border-left: 4px solid var(--secondary); }
  .timeline-node.action { border-left: 4px solid var(--primary); }
  .timeline-node.condition { @apply border-l-4 border-l-slate-500; }

  .node-icon-wrapper {
    @apply w-10 h-10 rounded-lg bg-white border border-slate-200 flex items-center justify-center text-slate-600 shrink-0 shadow-sm;
  }
  .timeline-node.trigger .node-icon-wrapper { color: var(--secondary); border-color: var(--secondary); }
  .timeline-node.action .node-icon-wrapper { color: var(--primary); border-color: var(--primary); }
  .timeline-node.condition .node-icon-wrapper { @apply text-slate-500 border-slate-500; }

  .node-text { @apply flex-1; }
  .node-title { @apply text-[15px] font-semibold text-black block; }
  .node-subtitle { @apply text-xs text-slate-600 block; }
  .node-remove { @apply opacity-0 text-slate-400 p-1; transition: var(--transition); }
  .timeline-node:hover .node-remove { @apply opacity-100; }
  .node-remove:hover { color: var(--danger); }

  .add-step-wrapper {
    @apply relative h-10 flex items-center justify-center z-[2] opacity-0 my-1 w-full;
    transition: opacity 0.2s;
  }
  .timeline-builder:hover .add-step-wrapper { @apply opacity-100; }

  .add-step-btn {
    @apply w-8 h-8 rounded-full border-0 text-white flex items-center justify-center cursor-pointer shadow-sm;
    background-color: var(--primary);
    transition: var(--transition);
  }
  .add-step-btn:hover {
    background-color: var(--primary-hover);
    transform: scale(1.1);
    @apply shadow-md;
  }

  .add-menu {
    @apply absolute top-10 bg-white border border-slate-200 rounded-lg p-2 shadow-lg flex flex-col gap-1 min-w-[180px] z-[100];
  }
  .add-menu-item {
    @apply flex items-center gap-3 p-2 text-sm text-slate-600 rounded cursor-pointer;
    transition: var(--transition);
  }
  .add-menu-item:hover { @apply bg-slate-50 text-black; }

  .timeline-empty {
    @apply p-12 text-center border-2 border-dashed border-slate-200 rounded-xl mt-4 w-[400px] bg-white z-[1];
  }
  .end-point { @apply w-3 h-3 bg-slate-300 rounded-full mt-4 z-[1]; }
}

/* ==========================================================================
   6. Tenant & Navigation Styles
   ========================================================================== */
@layer components {
  .tenant-switcher { @apply p-4 border-b border-slate-200 relative; }
  .tenant-button {
    @apply flex items-center gap-3 w-full p-3 bg-white border border-slate-200 rounded-xl cursor-pointer;
    transition: var(--transition);
  }
  .tenant-button:hover { @apply bg-slate-50; }
  .tenant-name { @apply flex-1 font-semibold text-left; }
  .tenant-chevron { transition: transform 0.2s; }
  .tenant-chevron.open { transform: rotate(180deg); }

  .tenant-dropdown {
    @apply absolute left-4 right-4 bg-white border border-slate-200 rounded-xl shadow-lg z-[100] overflow-hidden;
    top: calc(100% - 0.5rem);
  }
  .tenant-option { @apply py-3 px-4 cursor-pointer; transition: var(--transition); }
  .tenant-option:hover { @apply bg-slate-50; }
  .tenant-option.active { background-color: var(--primary-light); color: var(--primary); }

  .nav-item-new {
    @apply flex items-center gap-3.5 py-3.5 px-4 rounded-xl cursor-pointer text-slate-600 bg-transparent border-0 w-full text-left;
    font: inherit;
    transition: var(--transition);
  }
  .nav-item-new:hover { @apply bg-slate-100 text-black; }
  .nav-item-new.active { background-color: var(--primary-light); color: var(--primary); }
  .nav-item-content { @apply flex-1 flex flex-col; }
  .nav-item-label { @apply font-semibold text-[15px]; }
  .nav-item-desc { @apply text-xs text-slate-400; }
  .nav-item-new.active .nav-item-desc { color: var(--primary); @apply opacity-70; }
  .nav-chevron { color: var(--primary); }
}

/* ==========================================================================
   7. Dashboard Tab Styles
   ========================================================================== */
@layer components {
  .start-tab { @apply flex flex-col gap-6; }
  .start-grid { @apply grid gap-6; grid-template-columns: 1fr 1fr; }
  .start-left, .start-right { @apply flex flex-col gap-6; }

  .timestamp-cell { @apply flex items-center gap-2 text-[13px] text-slate-400; }

  .quality-legend { @apply flex gap-6 mb-4; }
  .legend-item { @apply flex items-center gap-2 text-xs text-slate-600; }
  .legend-dot { @apply w-2.5 h-2.5 rounded-full; }
  .legend-dot.success { background: var(--success); }
  .legend-dot.warning { background: var(--warning); }
  .legend-dot.danger { background: var(--danger); }

  .filters-bar {
    @apply flex items-center gap-4 mb-6 flex-wrap bg-white border border-slate-200 rounded-xl py-3 px-4 shadow-sm;
  }
  .filter-group { @apply flex items-center gap-2; }
  .filter-group label { @apply text-sm font-medium text-slate-600; }
  .filter-group select { @apply min-w-[150px]; }

  .kampagnen-content { @apply flex flex-col gap-6; }
  .campaign-details { @apply mt-4; }
  .header-tabs { @apply flex gap-2; }
  .header-tab {
    @apply py-2 px-4 text-[13px] bg-transparent border border-slate-200 rounded-lg cursor-pointer;
    transition: var(--transition);
  }
  .header-tab.active { background: var(--primary); @apply text-white; border-color: var(--primary); }

  .details-content { @apply flex flex-col gap-4; }
  .details-stats { @apply flex gap-8; }
  .stat-item { @apply flex flex-col gap-1; }
  .stat-label { @apply text-xs text-slate-400; }
  .stat-value { @apply text-xl font-bold text-black; }
  .placeholder-content { @apply flex flex-col items-center gap-3; }

  .traffic-charts-grid { @apply grid gap-6; grid-template-columns: 1fr 1fr; }
  .traffic-charts-grid .card.full-width { grid-column: 1 / -1; }
  .chart-filter { @apply py-1.5 px-3 text-xs border border-slate-200 rounded-lg bg-white; }

  .utm-generator-grid { @apply grid gap-6; grid-template-columns: 1fr 1.5fr; }
  .utm-form { @apply flex flex-col gap-4; }
  .url-preview { @apply flex gap-2; }
  .url-preview input { @apply flex-1 bg-slate-50; }

  .btn.danger, .btn-link.danger { color: var(--danger); }
}

/* ==========================================================================
   8. Flow Editor Styles
   ========================================================================== */
@layer components {
  .flow-kampagnen-tab .tab-header { @apply flex justify-end mb-6; }
  .campaign-cards-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }

  .campaign-card {
    @apply bg-white border border-slate-200 rounded-xl p-5;
    transition: var(--transition);
  }
  .campaign-card:hover { @apply shadow-md; transform: translateY(-2px); }
  .campaign-card-header { @apply flex justify-between items-start mb-4; }
  .campaign-title h4 { @apply text-base font-semibold mb-1; }
  .campaign-title p { @apply text-[13px] text-slate-400; }
  .campaign-badges { @apply flex gap-2; }
  .campaign-card-stats { @apply flex gap-6 py-4 border-t border-b border-slate-200 mb-4; }
  .campaign-card-stats .stat { @apply flex flex-col gap-0.5; }
  .campaign-card-stats .stat-label { @apply text-[11px] uppercase text-slate-400; }
  .campaign-card-stats .stat-value { @apply text-[15px] font-semibold; }
  .campaign-card-actions { @apply flex gap-2 items-center; }
  .campaign-card-actions .action-menu { @apply ml-auto; }

  .flow-editor-tab {
    @apply flex flex-col min-h-[600px];
    height: calc(100vh - 200px);
  }
  .editor-header {
    @apply flex justify-between items-center p-4 bg-white border border-slate-200 rounded-xl mb-4;
  }
  .editor-title { @apply flex flex-col gap-1; }
  .campaign-name-input { @apply text-lg font-semibold border-0 p-0 bg-transparent; }
  .campaign-description { @apply text-[13px] text-slate-400; }
  .editor-actions { @apply flex gap-2; }
  .editor-container { @apply flex flex-1 gap-4 min-h-0; }

  .editor-inspector-panel {
    @apply w-80 bg-white border border-slate-200 rounded-xl flex flex-col min-h-0 shrink-0 overflow-hidden;
  }
  .editor-inspector-panel .inspector-header {
    @apply p-4 border-b border-slate-200 bg-slate-50 flex flex-col gap-2;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }
  .editor-inspector-panel .inspector-header h4 { @apply text-sm font-semibold text-black; }
  .inspector-title-row { @apply flex items-center justify-between gap-2; }
  .inspector-meta { @apply text-xs text-slate-400; }
  .editor-inspector-panel .inspector-content { @apply p-4 flex flex-col gap-4 overflow-y-auto; }
  .inspector-section-row { @apply flex items-center justify-between gap-2 mb-2; }
  .inspector-hint { @apply text-[13px] text-slate-400 leading-snug; }

  @media (max-width: 1024px) {
    .editor-container { @apply flex-col; }
    .editor-inspector-panel { @apply w-full max-h-[45vh]; }
  }

  /* Flow Preview Modal */
  .flow-preview-overlay {
    @apply fixed inset-0 flex items-center justify-center p-4 z-[2000];
    background: rgba(15, 23, 42, 0.55);
  }
  .flow-preview-modal {
    @apply bg-white border border-slate-200 rounded-xl shadow-lg flex flex-col overflow-hidden;
    width: min(560px, 100%);
    max-height: calc(100vh - 2rem);
    animation: flowPreviewIn 0.18s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes flowPreviewIn {
    from { transform: translateY(8px) scale(0.98); opacity: 0; }
    to { transform: translateY(0) scale(1); opacity: 1; }
  }

  .flow-preview-header {
    @apply flex items-center justify-between p-4 border-b border-slate-200 bg-slate-50;
  }
  .flow-preview-title { @apply flex flex-col gap-1; }
  .flow-preview-title h3 { @apply text-base font-semibold m-0; }
  .flow-preview-progress { @apply text-xs text-slate-400; }
  .flow-preview-progress-bar { @apply h-1 bg-slate-200 rounded-full overflow-hidden mt-1; width: min(240px, 100%); }
  .flow-preview-progress-bar-fill { @apply h-full; background: var(--primary); transition: width 0.2s ease; }

  .flow-preview-body {
    @apply p-6 flex flex-col gap-4 overflow-y-auto items-center;
    background: var(--bg-app);
  }
  .flow-preview-step { @apply w-full flex flex-col gap-4; animation: flowPreviewStepIn 0.2s ease; }

  @keyframes flowPreviewStepIn {
    from { opacity: 0; transform: translateY(6px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .flow-preview-question-card, .flow-preview-branch, .flow-preview-end {
    @apply bg-white border border-slate-200 p-5 shadow-md relative;
    width: min(440px, 100%);
    border-radius: var(--radius-xl);
  }
  .flow-preview-question-card::before, .flow-preview-branch::before, .flow-preview-end::before {
    content: '';
    @apply absolute top-0 left-0 right-0 h-1;
    background: var(--primary);
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
  }

  .flow-preview-question { @apply text-lg font-bold mb-1; }
  .flow-preview-description { @apply text-sm text-slate-600 leading-relaxed mb-3; }
  .flow-preview-hint { @apply text-xs text-slate-400 mb-2; }
  .flow-preview-answers { @apply flex flex-col gap-2; }

  .flow-preview-answer {
    @apply flex items-center gap-3 text-left py-3 px-4 bg-slate-50 border border-slate-200 rounded-xl text-sm cursor-pointer relative;
    transition: var(--transition);
  }
  .flow-preview-answer.single::before, .flow-preview-answer.multi::before {
    content: '';
    @apply w-4 h-4 border-2 border-slate-300 bg-white shrink-0;
  }
  .flow-preview-answer.single::before { @apply rounded-full; }
  .flow-preview-answer.multi::before { @apply rounded; }
  .flow-preview-answer:hover {
    background-color: var(--primary-light);
    border-color: var(--primary);
  }
  .flow-preview-answer.selected {
    background-color: var(--primary-light);
    border-color: var(--primary);
    box-shadow: inset 0 0 0 1px var(--primary);
  }
  .flow-preview-answer.selected::before {
    border-color: var(--primary);
    background: var(--primary);
    box-shadow: inset 0 0 0 3px var(--bg-surface);
  }

  .flow-preview-select { @apply w-full p-3 border border-slate-200 rounded-lg bg-white text-[15px]; }
  .flow-preview-input { @apply w-full p-3 border border-slate-200 rounded-lg text-[15px] bg-white; }
  .flow-preview-range { @apply flex items-center gap-3; }
  .flow-preview-range input[type="range"] { @apply flex-1; }
  .flow-preview-range-value { @apply w-10 text-center font-semibold text-black text-sm; }

  .flow-preview-footer {
    @apply p-4 border-t border-slate-200 flex items-center justify-between gap-2 bg-white;
  }
  @media (max-width: 640px) {
    .flow-preview-footer { @apply flex-col items-stretch; }
  }

  /* Cards Library */
  .cards-library { @apply w-[200px] bg-white border border-slate-200 rounded-xl p-4 overflow-y-auto; }
  .cards-library h4 { @apply text-sm font-semibold mb-4; }
  .library-section { @apply mb-4; }
  .library-section h5 { @apply text-xs text-slate-400 uppercase mb-2; }
  .library-item {
    @apply flex items-center gap-2 p-2 text-[13px] bg-slate-50 border border-slate-200 rounded-lg mb-1.5 cursor-grab;
    transition: var(--transition);
  }
  .library-item:hover { @apply bg-slate-100; border-color: var(--primary); }
  .library-item:active { @apply cursor-grabbing; }

  /* Flow Canvas */
  .flow-canvas { @apply flex-1 bg-white border border-slate-200 rounded-xl overflow-hidden; }
  .flow-canvas .react-flow {
    background: repeating-linear-gradient(0deg, transparent, transparent 19px, var(--slate-100) 19px, var(--slate-100) 20px),
                repeating-linear-gradient(90deg, transparent, transparent 19px, var(--slate-100) 19px, var(--slate-100) 20px);
  }

  .flow-node { @apply bg-white rounded-xl min-w-[150px] shadow; border: 2px solid var(--border-color); }
  .flow-node .node-header {
    @apply py-2 px-3 text-[11px] font-semibold uppercase text-white;
    border-radius: calc(var(--radius-lg) - 2px) calc(var(--radius-lg) - 2px) 0 0;
  }
  .flow-node .node-content { @apply p-3 text-sm font-medium; }
  .flow-node .node-footer { @apply py-2 px-3 text-xs text-slate-400 border-t border-slate-200; }
  .flow-node.start-node { border-color: var(--primary); }
  .flow-node.start-node .node-header { background: var(--primary); }
  .flow-node.question-node { border-color: var(--swk-blue); }
  .flow-node.question-node .node-header { background: var(--swk-blue); }
  .flow-node.module-node { @apply border-slate-500; }
  .flow-node.module-node .node-header { @apply bg-slate-500; }
  .flow-node.option-node { border-color: #f59e0b; }
  .flow-node.option-node .node-header { background: #f59e0b; }

  /* Leadscore Config */
  .leadscore-config-panel {
    @apply w-[280px] bg-white border border-slate-200 rounded-xl flex flex-col h-fit;
  }
  .leadscore-config-panel .config-header {
    @apply p-4 border-b border-slate-200 bg-slate-50;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
  }
  .leadscore-config-panel .config-header h4 { @apply text-sm font-semibold text-black; }
  .leadscore-config-panel .config-content { @apply p-4 flex flex-col gap-4; }

  .config-section { @apply flex flex-col gap-2; }
  .config-section label { @apply text-xs font-medium text-slate-600; }
  .config-section h5 { @apply text-[11px] font-semibold uppercase tracking-wide text-slate-400 mb-1; }

  .leadscore-table { @apply w-full border border-slate-200 rounded-lg overflow-hidden; border-collapse: collapse; }
  .leadscore-table td { @apply py-2 px-3 text-[13px] border-b border-slate-200 bg-white; }
  .leadscore-table tr:last-child td { @apply border-b-0; }
  .leadscore-table td:first-child { @apply text-slate-600; }
  .leadscore-table td.score { @apply text-right font-semibold font-mono w-[50px]; }
  .leadscore-table td.score.positive { color: var(--success); }
  .leadscore-table td.score.neutral { @apply text-slate-400; }
  .leadscore-table td.score.negative { color: var(--danger); }

  .config-header { @apply flex justify-between items-center p-4 border-b border-slate-200; }
  .config-header h4 { @apply text-[15px] font-semibold; }
  .config-content { @apply p-4 flex flex-col gap-4; }
}

/* ==========================================================================
   9. Structured Flow Editor
   ========================================================================== */
@layer components {
  .structured-flow-wrapper {
    @apply flex-1 bg-white border border-slate-200 rounded-xl overflow-hidden relative;
  }

  .structured-flow-canvas {
    @apply flex flex-col items-center w-full h-full overflow-hidden relative cursor-grab;
    background-image: radial-gradient(var(--slate-200) 1px, transparent 1px);
    background-size: 24px 24px;
    background-color: var(--slate-50);
  }
  .structured-flow-canvas:active { @apply cursor-grabbing; }
  .structured-flow-canvas.empty { @apply justify-center text-slate-400; }

  .flow-transform-layer {
    @apply min-w-full min-h-full flex justify-center py-8 px-4;
    transform-origin: center top;
    transition: transform 0.05s linear;
    will-change: transform;
  }

  .flow-tree { @apply flex flex-col items-center; }
  .flow-level { @apply flex flex-col items-center; }

  .structured-node {
    @apply bg-white border border-slate-200 rounded-xl shadow-sm flex items-center py-2.5 px-3 min-w-[180px] max-w-[220px] gap-3 relative cursor-pointer;
    border-left: 4px solid var(--node-color, var(--slate-400));
    transition: var(--transition);
  }
  .structured-node:hover { @apply shadow-md border-slate-300; transform: translateY(-2px); }
  .structured-node.selected {
    box-shadow: 0 0 0 2px var(--primary-light), var(--shadow-md);
    border-color: var(--primary);
  }

  .structured-node .node-icon-wrapper {
    @apply w-8 h-8 rounded-lg text-white flex items-center justify-center shrink-0 shadow-sm;
    background: var(--node-color, var(--slate-400));
  }

  .node-content-wrapper { @apply flex-1 flex flex-col min-w-0; }
  .node-type-label { @apply text-[11px] font-bold uppercase text-slate-400 tracking-wider mb-0.5; }
  .node-main-label { @apply text-[13px] font-semibold text-black whitespace-nowrap overflow-hidden text-ellipsis; }
  .node-meta { @apply text-xs text-slate-400 font-mono mt-0.5; }

  .node-actions-overlay { @apply flex flex-col gap-1 opacity-0 ml-2; transition: opacity 0.2s; }
  .structured-node:hover .node-actions-overlay { @apply opacity-100; }
  .node-action-icon {
    @apply w-6 h-6 flex items-center justify-center rounded border-0 bg-transparent text-slate-400 cursor-pointer;
    transition: var(--transition);
  }
  .node-action-icon:hover { @apply bg-slate-100 text-black; }
  .node-action-icon.delete:hover { background: var(--danger-light); color: var(--danger); }

  .flow-connector { @apply flex flex-col items-center justify-center relative h-9 w-8; }
  .connector-line { @apply w-0.5 absolute left-1/2 -translate-x-1/2; background: var(--border-color); }
  .connector-line.top { @apply top-0 h-1/2; }
  .connector-line.bottom { @apply bottom-0 h-1/2; }
  .connector-button-wrapper { @apply relative z-10 flex items-center justify-center; }

  .add-node-btn {
    @apply w-6 h-6 rounded-full bg-white text-slate-400 border border-slate-200 flex items-center justify-center cursor-pointer shadow-sm;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .flow-connector:hover .add-node-btn, .connector-button-wrapper.active .add-node-btn {
    @apply w-8 h-8 text-white shadow-md;
    background: var(--primary);
    border-color: var(--primary);
  }

  .node-type-selector {
    @apply absolute top-1/2 bg-white border border-slate-200 rounded-xl shadow-xl min-w-[240px] z-[100] overflow-hidden;
    left: calc(100% + 1rem);
    transform: translateY(-50%);
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-50%) scale(0.95); }
    to { opacity: 1; transform: translateY(-50%) scale(1); }
  }

  .selector-header {
    @apply flex justify-between items-center py-3 px-4 bg-slate-50 border-b border-slate-200 text-xs font-semibold text-slate-600 uppercase tracking-wider;
  }
  .selector-header .close-btn { @apply bg-transparent border-0 p-1 cursor-pointer text-slate-400 rounded; }
  .selector-header .close-btn:hover { @apply text-black bg-slate-200; }
  .selector-options { @apply p-2 flex flex-col gap-1; }
  .selector-option {
    @apply flex items-center gap-3 w-full p-3 bg-transparent border-0 rounded-lg cursor-pointer text-left;
    transition: var(--transition);
  }
  .selector-option:hover { @apply bg-slate-50; }

  .flow-branch { @apply flex gap-6 relative pt-6; }
  .flow-branch::before {
    content: '';
    @apply absolute top-0 left-1/2 -translate-x-1/2 w-0.5 h-6 bg-slate-300;
  }
  .branch-path { @apply flex flex-col items-center relative; }
  .branch-line-horizontal, .branch-line-vertical { @apply hidden; }
  .branch-path::before {
    content: '';
    @apply absolute left-1/2 -translate-x-1/2 w-0.5 h-8 bg-slate-300;
    top: -32px;
  }
  .branch-path::after {
    content: '';
    @apply absolute left-0 w-full h-0.5 bg-slate-300;
    top: -32px;
  }
  .branch-path:first-of-type::after { @apply left-1/2 w-1/2; }
  .branch-path:last-of-type::after { @apply w-1/2 left-0; }
  .branch-path:only-of-type::after { @apply hidden; }
}

/* ==========================================================================
   10. Card Editor Styles
   ========================================================================== */
@layer components {
  .card-editor-tab .tab-header { @apply flex justify-end mb-6; }
  .cards-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }

  .card-item {
    @apply bg-white border border-slate-200 rounded-xl p-5;
    transition: var(--transition);
  }
  .card-item:hover { @apply shadow-md; }
  .card-item-header { @apply flex justify-between items-center mb-3; }
  .card-item-header h4 { @apply text-base font-semibold; }
  .card-item-meta { @apply text-xs text-slate-400 mb-2; }
  .card-item-flows { @apply flex flex-wrap gap-1.5 mb-4; }
  .flow-tag { @apply text-[11px] py-1 px-2 bg-slate-100 rounded text-slate-600; }
  .card-item-footer { @apply flex justify-between items-center pt-4 border-t border-slate-200; }
  .last-updated { @apply text-xs text-slate-400; }
  .card-actions { @apply flex gap-1; }

  .card-editor-container { @apply flex flex-col min-h-[500px]; height: calc(100vh - 200px); }
  .editor-main { @apply flex flex-1 gap-4 min-h-0; }
  .card-canvas { @apply flex-1 bg-white border border-slate-200 rounded-xl p-6 overflow-y-auto; }
  .canvas-header { @apply mb-6; }
  .canvas-header .form-row { @apply grid gap-4; grid-template-columns: repeat(3, 1fr); }
  .canvas-content { @apply flex flex-col gap-6; }

  .component-placeholder { @apply p-4 bg-slate-50 border border-dashed border-slate-200 rounded-xl; }
  .component-placeholder h5 { @apply text-xs text-slate-400 mb-2; }
  .answer-options { @apply flex flex-col gap-2 mb-3; }
  .answer-option { @apply flex items-center gap-2; }
  .answer-option input { @apply flex-1; }
  .add-answer { @apply mt-2; }

  .component-library { @apply w-[220px] bg-white border border-slate-200 rounded-xl p-4 overflow-y-auto; }
  .component-library h4 { @apply text-sm font-semibold mb-4; }
  .input-type-select { @apply w-full mt-2; }
}

/* ==========================================================================
   11. Globale Werte & Settings
   ========================================================================== */
@layer components {
  .globale-werte-tab { @apply flex flex-col gap-8; }
  .section { @apply flex flex-col gap-4; }
  .section-header { @apply flex justify-between items-center; }
  .section-header h3 { @apply text-lg font-semibold; }

  .score-rules-grid {
    @apply grid gap-4;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  }
  .score-rule-card { @apply bg-white border border-slate-200 rounded-xl p-4; }
  .rule-header { @apply flex justify-between items-center mb-2; }
  .rule-header h4 { @apply text-[15px] font-semibold; }
  .score-value { @apply text-sm font-bold; color: var(--success); }
  .rule-description { @apply text-[13px] text-slate-400; }

  .variables-section { @apply mb-6; }
  .kampagne-header { @apply text-[15px] font-semibold mb-4 pb-2 border-b border-slate-200; }
  .value-cell { @apply font-semibold; color: var(--primary); }
  .add-variable { @apply mt-3; }
}

/* ==========================================================================
   12. Leads View
   ========================================================================== */
@layer components {
  .leads-view { height: calc(100vh - 120px); }
  .leads-container { @apply flex h-full gap-6; }
  .leads-container.with-detail .leads-list-panel { @apply flex-1; }
  .leads-list-panel { @apply flex-1 flex flex-col; }
  .lead-detail-panel {
    @apply shrink-0;
    width: clamp(380px, 35%, 500px);
    min-width: 380px;
    max-width: 500px;
  }

  .leads-list { @apply flex flex-col h-full; }
  .leads-header { @apply flex justify-between items-center mb-4; }
  .leads-header h2 { @apply text-xl font-bold; }
  .leads-controls { @apply flex gap-2 items-center; }
  .section-subheader { @apply text-xs font-semibold uppercase text-slate-400 mb-2; }

  .leads-table { @apply flex-1; }
  .leads-table tr.selected { background: var(--primary-light); }
  .lead-id-cell { @apply font-semibold font-mono; }

  .lead-detail {
    @apply bg-white border border-slate-200 rounded-xl h-full flex flex-col overflow-hidden;
  }
  .detail-header {
    @apply flex justify-between items-center p-4 border-b border-slate-200 sticky top-0 bg-white z-10;
  }
  .header-info { @apply flex items-center gap-4; }
  .header-info h3 { @apply text-base font-semibold; }

  .status-buttons {
    @apply flex gap-2 py-3 px-4 border-b border-slate-200 sticky bg-white z-[9];
    top: 56px;
  }
  .status-buttons .btn { @apply flex-1 justify-center; }

  .detail-content { @apply flex-1 overflow-y-auto p-4; }
  .detail-section { @apply mb-6; }
  .section-title { @apply flex items-center gap-2 mb-3; }
  .section-title h4 { @apply text-sm font-semibold; }
  .section-content { @apply bg-slate-50 rounded-lg p-4; }

  .data-row { @apply flex justify-between py-2 border-b border-slate-200; }
  .data-row:last-child { @apply border-b-0; }
  .data-row .label { @apply text-[13px] text-slate-400; }
  .data-row .value { @apply text-[13px] font-medium; }

  .score-table { @apply text-[13px]; }
  .score-table th, .score-table td { @apply !p-2; }

  .consent-section { @apply flex gap-8; }
  .consent-item { @apply flex items-center; }
  .checkbox-label { @apply flex items-center gap-2 cursor-pointer text-sm; }
  .checkbox-label input { @apply w-4 h-4 accent-primary; }

  /* Collapsible */
  .detail-section.collapsible { @apply border border-slate-200 rounded-lg mb-3 overflow-hidden bg-white; }
  .section-header-btn {
    @apply flex justify-between items-center w-full py-3 px-4 bg-slate-50 border-0 cursor-pointer;
    transition: background 0.15s ease;
  }
  .section-header-btn:hover { @apply bg-slate-100; }
  .section-header-btn:focus-visible { @apply outline-2 outline-primary outline-offset-[-2px]; }
  .section-header-btn .section-title { @apply mb-0; }
  .section-chevron { @apply text-slate-400 shrink-0; transition: transform 0.2s ease; }
  .section-chevron.open { transform: rotate(180deg); }
  .section-body { animation: slideDown 0.15s ease; }

  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-4px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .data-grid { @apply grid gap-x-4 gap-y-1; grid-template-columns: repeat(2, 1fr); }
  .data-grid .data-row { @apply border-b-0 py-1.5; }
  .data-row.full-width { grid-column: 1 / -1; }

  .show-more-btn {
    @apply w-full py-2 mt-2 text-[13px] text-center bg-slate-50 rounded-lg;
    color: var(--primary);
  }
  .show-more-btn:hover { @apply bg-slate-100 no-underline; }

  @media (min-width: 1400px) {
    .lead-detail-panel { width: clamp(420px, 30%, 550px); max-width: 550px; }
  }
  @media (max-width: 1200px) {
    .lead-detail-panel { @apply w-[380px] min-w-[340px]; }
    .data-grid { grid-template-columns: 1fr; }
  }

  .lead-detail-backdrop { @apply hidden; }

  @media (max-width: 1024px) {
    .leads-container.with-detail { @apply relative; }
    .lead-detail-panel {
      @apply fixed right-0 top-0 h-screen z-50 shadow-xl;
      width: 420px;
      max-width: 90vw;
      animation: slideInRight 0.2s ease;
    }
    .lead-detail-backdrop {
      @apply block fixed inset-0 z-[49];
      background: rgba(0, 0, 0, 0.3);
    }
  }

  /* Activity Timeline */
  .activity-timeline { @apply flex flex-col gap-0 py-2; }
  .timeline-item { @apply flex gap-3 py-3 relative; }
  .timeline-item:not(:last-child)::after {
    content: '';
    @apply absolute w-0.5 bg-slate-200;
    left: 11px;
    top: 34px;
    bottom: -12px;
  }
  .timeline-icon { @apply w-6 h-6 rounded-full flex items-center justify-center text-white shrink-0; }
  .timeline-content { @apply flex-1 min-w-0; }
  .timeline-header { @apply flex justify-between items-start gap-2 mb-1; }
  .timeline-title { @apply text-[13px] font-semibold text-black; }
  .timeline-time { @apply text-[11px] text-slate-400 whitespace-nowrap; }
  .timeline-description { @apply text-xs text-slate-600 m-0 mb-1; }
  .timeline-user { @apply text-[11px] text-slate-400; }
}

/* ==========================================================================
   13. Einstellung Views
   ========================================================================== */
@layer components {
  .integration-tab .section, .sync-protokoll-tab .section { @apply mb-8; }
  .integration-cards-grid {
    @apply grid gap-6;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }

  .integration-card { @apply bg-white border border-slate-200 rounded-xl p-5; }
  .integration-header { @apply flex items-start gap-4 mb-4; }
  .integration-icon {
    @apply w-12 h-12 flex items-center justify-center bg-slate-100 rounded-xl text-slate-600;
  }
  .integration-info { @apply flex-1; }
  .integration-info h4 { @apply text-base font-semibold mb-0.5; }
  .integration-type { @apply text-xs text-slate-400; }
  .integration-description { @apply text-[13px] text-slate-600 mb-4; }
  .integration-status { @apply p-4 bg-slate-50 rounded-lg mb-4; }
  .status-row { @apply flex justify-between items-center mb-2; }
  .status-row:last-child { @apply mb-0; }
  .status-row .label { @apply text-xs text-slate-400; }
  .status-row .value { @apply text-[13px]; }
  .error-message {
    @apply flex items-center gap-2 mt-3 p-2 rounded text-xs;
    background: var(--danger-light);
    color: var(--danger);
  }
  .integration-actions { @apply flex gap-2; }
  .status-icon.success { color: var(--success); }
  .status-icon.danger { color: var(--danger); }
  .status-icon.warning { color: var(--warning); }

  .sync-table tr.status-error { background: var(--danger-light); }
  .sync-table tr.status-warning { background: var(--warning-light); }
  .event-cell { @apply flex items-center gap-2; }
  .method-badge { @apply text-[11px] font-bold py-1 px-2 rounded font-mono; }
  .method-badge.get { background: var(--info-light); color: var(--info); }
  .method-badge.post { background: var(--success-light); color: var(--success); }
  .method-badge.put { background: var(--warning-light); color: var(--warning); }
  .method-badge.delete { background: var(--danger-light); color: var(--danger); }
  .abstract-cell { @apply max-w-[300px] whitespace-nowrap overflow-hidden text-ellipsis; }
  .header-actions { @apply flex gap-2 items-center; }

  .status-badge-ampel { @apply inline-flex items-center gap-1.5 py-1 px-2.5 rounded-full text-xs font-semibold; }
  .status-badge-ampel.success { background-color: var(--success-light); color: var(--success); }
  .status-badge-ampel.warning { background-color: var(--warning-light); color: var(--warning); }
  .status-badge-ampel.danger { background-color: var(--danger-light); color: var(--danger); }
  .actions-cell { @apply w-[100px]; }
}

/* ==========================================================================
   14. Mobile Header & Responsive
   ========================================================================== */
@layer components {
  .mobile-header { @apply hidden; }
}

@media (max-width: 1024px) {
  .mobile-header { @apply flex; }

  .main-content {
    @apply ml-0;
    padding: calc(var(--header-height) + 1.5rem) 1.5rem 2rem;
  }

  .sidebar {
    @apply w-[280px] z-[100] shadow-xl;
    transform: translateX(-100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  .sidebar.open { transform: translateX(0); }

  .overlay {
    @apply fixed inset-0 opacity-0 invisible z-[90];
    background: rgb(0 0 0 / 0.5);
    transition: opacity 0.3s ease;
    backdrop-filter: blur(2px);
  }
  .overlay.show { @apply opacity-100 visible; }

  .start-grid { @apply grid-cols-1 gap-6; }
}

@media (max-width: 768px) {
  h1 { @apply text-[28px]; }
  h2 { @apply text-[22px]; }
  h3 { @apply text-lg; }

  .main-content {
    padding: calc(var(--header-height) + 1rem) 1rem 1.5rem;
  }

  .section-header { @apply flex-col items-start gap-4; }
  .header-actions { @apply w-full justify-start flex-wrap; }

  .content-grid, .grid-3, .start-grid, .sales-reps-grid, .integrations-grid,
  .churn-metrics-bar, .lead-magnets-grid, .timers-grid, .campaign-cards-grid,
  .traffic-charts-grid, .utm-generator-grid {
    grid-template-columns: 1fr !important;
  }

  .form-row { @apply grid-cols-1 gap-4; }
  .kpi-bar { @apply grid-cols-1 gap-4; }

  .section-tabs {
    @apply overflow-x-auto whitespace-nowrap pb-2 -mr-4 pr-4;
    scrollbar-width: none;
  }
  .section-tabs::-webkit-scrollbar { @apply hidden; }
  .section-tab {
    @apply shrink-0 py-3 px-4 bg-slate-50 rounded-full border border-slate-200 mr-2;
  }
  .section-tab.active {
    background-color: var(--primary);
    @apply text-white;
    border-color: var(--primary);
  }

  .table-wrapper { @apply rounded-lg shadow-none border border-slate-200; }
  .data-table th, .data-table td { @apply py-3 px-4 whitespace-nowrap; }

  .leads-controls { @apply flex-col items-stretch gap-4; }
  .leads-toggle { @apply w-full justify-center; }
  .search-box { @apply w-full; }
  .filter-group-inline { @apply w-full; }
  .filter-group-inline select { @apply w-full; }

  .card { @apply p-4; }
  .filters-bar { @apply flex-col items-stretch; }
  .filter-group { @apply flex-col items-stretch; }
}

/* ==========================================================================
   15. Utility Classes (Tailwind Overrides)
   ========================================================================== */
@layer utilities {
  .text-muted { @apply text-slate-600; }
  .font-bold { @apply font-semibold; }
  .bg-bg-app { background-color: var(--bg-app); }
  .text-primary { color: var(--primary); }
  .bg-primary { background-color: var(--primary); }
  .border-primary { border-color: var(--primary); }
  .font-inherit { font: inherit; }
}
